{% extends 'base.html' %}

{% block content %}

  <h1>visualization</h1>

  <script>
    function convert_to_list(data){
      teams=data['teams']; 
      team_list=[]
      val_list=[]
      for (team in teams){
        team_list.push(team);
        val_list.push(teams[team]);
      }

      return [team_list, val_list]
    }

    function get_match_winners(){
      url='api/match_winners';
      $.get(url, function(data){console.log(convert_to_list(data))});
      
    }

    function get_season_match_winners(season){
      url='api/season_match_winners/'+season
      $.get(url, function(data){console.log(convert_to_list(data))});
    }

    function get_match_played(){
      url='api/match_played'
      $.get(url, function(data){console.log(convert_to_list(data))});

    }

    function get_season_match_played(season){
      url='api/season_match_played/'+season
      $.get(url, function(data){console.log(convert_to_list(data))});
    }

    function get_moms(){
      url='api/max_moms'
      $.get(url, function(data){console.log(convert_to_list(data))});
    }

    $(document).ready(function() {
      get_match_winners();
      get_match_played();

      get_season_match_winners(2019);
      get_season_match_played(2019);
    });
  </script>

<div id="container" style="width:100%; height:400px;"></div>

<div id="container2" style="width:100%; height:400px;"></div>

<script>

Highcharts.setOptions({ colors: [
  '#000080',
  '#FFFF00',
  '#800080',
  '#FFD700',
  '#FF0000',
  '#FFC0CB',
  '#00FFFF',
  '#FFA500',
  '#C0C0C0',
  '#EE82EE',
  '#00FFFF',
  '#FF00FF',
  '#ADD8E6',
  '#000000',
  '#000000',
  '#000000']});


url='api/match_winners';
$.get(url, function(data){
  total_list = convert_to_list(data);
  teams = total_list[1];
  team_names = total_list[0];

  console.log(teams);

  document.addEventListener('DOMContentLoaded', function () {
        var myChart = Highcharts.chart('container', {
            chart: {
                type: 'column'
            },
            title: {
                text: 'Matches Won by Each Team'
            },
            xAxis: {
                categories: team_names
            },
            yAxis: {
                title: {
                    text: 'Matches Won'
                }
            },
            series: [{
                
                data: teams,
            }]
        });
    });
  });

  url='api/max_moms';
$.get(url, function(data){
  
  mom_data = convert_to_list(data)
  

  mom_names = mom_data[0];
  
  console.log(mom_names);
  
  mom_won = mom_data[1];

  

  document.addEventListener('DOMContentLoaded', function () {
        var newChart = Highcharts.chart('container2', {
            chart: {
                type: 'column'
            },
            colors: [
                  '#000000'
            ],
            title: {
                text: 'Man of the Match Awards Won'
            },
            xAxis: {
                categories: mom_names
            },
            yAxis: {
                title: {
                    text: 'Awards Won'
                }
            },
            
            series: [{
                
                data: mom_won,
            }]
        });
    });

  });

</script>



{% endblock content %}